# Login & Register 页面需求规格 - v4.x

## 📋 项目概述

**功能模块**: 用户登录与注册系统  
**当前版本**: v4.3  
**技术栈**: Vue 3 + Element Plus + localStorage  
**设计风格**: Clerk.com 极简风格  

---

## 🎯 核心目标

### 业务目标
1. 提供简洁、专业的用户认证体验
2. 支持用户名 + 密码登录方式
3. 实现真实的用户注册功能（localStorage 持久化）
4. 确保表单验证的完整性和用户友好性

### 用户目标
1. 快速完成登录/注册流程（< 30 秒）
2. 清晰的错误提示和操作反馈
3. 简洁的界面，无干扰元素
4. 移动端和桌面端都有良好体验

---

## 👥 用户故事

### US-1: 用户注册
**作为** 新用户  
**我想要** 创建一个账号  
**以便** 访问系统的数据分析功能

**验收标准**:
- [ ] 注册表单包含：姓名、邮箱、密码、确认密码
- [ ] 姓名最少 2 位字符
- [ ] 邮箱必须是有效格式
- [ ] 密码最少 6 位字符
- [ ] 确认密码必须与密码一致
- [ ] 检查用户名是否已存在
- [ ] 检查邮箱是否已被注册
- [ ] 注册成功后保存到 localStorage
- [ ] 注册成功后 2 秒自动跳转到登录页
- [ ] 显示成功/失败的消息提示

### US-2: 用户登录
**作为** 已注册用户  
**我想要** 使用用户名和密码登录  
**以便** 访问我的数据看板

**验收标准**:
- [ ] 登录表单包含：用户名、密码
- [ ] 用户名和密码为必填项
- [ ] 密码最少 6 位字符
- [ ] 从 localStorage 验证用户凭证
- [ ] 登录成功后保存 token 和 currentUser 到 localStorage
- [ ] 登录成功后跳转到运营看板（/ops-dashboard）
- [ ] 显示成功/失败的消息提示
- [ ] 密码输入框支持显示/隐藏切换

### US-3: 表单验证
**作为** 用户  
**我想要** 在提交前看到清晰的验证错误  
**以便** 快速修正输入错误

**验收标准**:
- [ ] 实时表单验证（失焦时触发）
- [ ] 清晰的错误提示信息（中文）
- [ ] 错误字段高亮显示
- [ ] 提交按钮在表单无效时禁用
- [ ] 验证规则符合业务要求

### US-4: 页面导航
**作为** 用户  
**我想要** 在登录和注册页面之间切换  
**以便** 根据需要选择合适的操作

**验收标准**:
- [ ] 登录页底部有"还没有账号？注册"链接
- [ ] 注册页底部有"已有账号？登录"链接
- [ ] 点击链接后平滑跳转到对应页面
- [ ] 跳转后清空表单数据

---

## 🎨 设计需求

### 视觉风格
- **设计参考**: Clerk.com 极简风格
- **背景色**: 纯色 `#F9FAFB`（Gray 50）
- **卡片背景**: 纯白 `#FFFFFF`
- **主色调**: 深灰 `#111827`（Gray 900）
- **强调色**: 蓝色 `#3B82F6`（Blue 500）

### 布局规范
- **卡片宽度**: 最大 400px
- **卡片内边距**: 
  - 桌面端：40px
  - 移动端：32px 24px
- **表单间距**: 20px
- **按钮高度**: 44px

### 交互效果
- **输入框聚焦**: 蓝色边框 + 阴影
- **按钮悬停**: 背景色加深
- **按钮点击**: 轻微缩放效果
- **链接悬停**: 下划线显示

### 响应式设计
- **桌面端（≥ 640px）**: 卡片居中，内边距 40px
- **移动端（< 640px）**: 卡片全宽，内边距 32px 24px

---

## 🔧 技术需求

### 数据结构

#### localStorage 存储结构

**用户列表（users）**:
```json
[
  {
    "username": "张三",
    "email": "zhangsan@example.com",
    "password": "123456",
    "createdAt": "2026-02-07T10:30:00.000Z"
  }
]
```

**当前登录用户（currentUser）**:
```json
{
  "username": "张三",
  "email": "zhangsan@example.com",
  "password": "123456",
  "createdAt": "2026-02-07T10:30:00.000Z"
}
```

**认证令牌（token）**:
```
token-1707302400000
```

### 表单验证规则

#### 登录表单
| 字段 | 规则 | 错误提示 |
|------|------|---------|
| 用户名 | 必填 | "请输入用户名" |
| 密码 | 必填，最少 6 位 | "请输入密码" / "密码至少 6 位" |

#### 注册表单
| 字段 | 规则 | 错误提示 |
|------|------|---------|
| 姓名 | 必填，最少 2 位 | "请输入姓名" / "姓名至少 2 位" |
| 邮箱 | 必填，有效邮箱格式 | "请输入邮箱" / "请输入有效的邮箱地址" |
| 密码 | 必填，最少 6 位 | "请输入密码" / "密码至少 6 位" |
| 确认密码 | 必填，与密码一致 | "请再次输入密码" / "两次输入的密码不一致" |

### 路由配置
- **登录页**: `/login`
- **注册页**: `/register`
- **登录成功跳转**: `/ops-dashboard`
- **注册成功跳转**: `/login`（2 秒延迟）

---

## ⚠️ 安全性说明

### 当前实现（演示级别）
- ❌ 密码明文存储（未加密）
- ❌ 无后端验证
- ❌ 无 HTTPS 传输
- ❌ 无 Token 过期机制
- ❌ 无防暴力破解机制

### 生产环境建议
- ✅ 使用后端 API 进行用户注册和登录
- ✅ 密码使用 bcrypt 等算法加密
- ✅ 使用 JWT Token 进行身份验证
- ✅ 实现 Token 刷新机制
- ✅ 添加验证码防止暴力破解
- ✅ 实现 HTTPS 传输
- ✅ 添加 CSRF 保护
- ✅ 实现登录失败次数限制

---

## 📊 性能需求

### 加载性能
- **首屏加载时间**: < 1 秒
- **表单验证响应**: < 100ms
- **登录/注册请求**: < 500ms（Mock 数据）

### 浏览器兼容性
| 浏览器 | 最低版本 | 支持情况 |
|--------|---------|---------|
| Chrome | 90+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |

---

## 🧪 测试需求

### 功能测试

#### 注册功能
- [ ] 成功注册新用户
- [ ] 用户名重复时显示错误
- [ ] 邮箱重复时显示错误
- [ ] 表单验证规则正确
- [ ] 注册成功后自动跳转

#### 登录功能
- [ ] 使用正确凭证登录成功
- [ ] 使用错误凭证登录失败
- [ ] 表单验证规则正确
- [ ] 登录成功后跳转到看板

#### 表单验证
- [ ] 必填字段验证
- [ ] 邮箱格式验证
- [ ] 密码长度验证
- [ ] 确认密码一致性验证
- [ ] 实时验证触发正确

### UI 测试
- [ ] 桌面端布局正确
- [ ] 移动端布局正确
- [ ] 输入框聚焦效果正确
- [ ] 按钮悬停效果正确
- [ ] 错误提示显示正确

### 数据持久化测试
- [ ] 注册数据保存到 localStorage
- [ ] 登录后 token 保存到 localStorage
- [ ] 刷新页面后数据不丢失
- [ ] 清除浏览器缓存后数据丢失

---

## 📈 未来改进建议

### 功能增强
- [ ] 支持邮箱登录
- [ ] 支持第三方登录（Google、GitHub）
- [ ] 支持"记住我"功能
- [ ] 支持"忘记密码"功能
- [ ] 支持邮箱验证
- [ ] 支持手机号注册/登录

### 安全增强
- [ ] 对接真实后端 API
- [ ] 密码加密存储
- [ ] JWT Token 认证
- [ ] Token 自动刷新
- [ ] 添加验证码
- [ ] 登录失败次数限制

### 用户体验优化
- [ ] 添加加载动画
- [ ] 支持键盘快捷键（Enter 提交）
- [ ] 支持密码强度提示
- [ ] 支持自动填充
- [ ] 添加页面过渡动画

---

## 📝 版本历史

| 版本 | 日期 | 主要变更 | 设计风格 |
|------|------|---------|---------|
| v1.0 | 2026-02-06 | 初始版本 | 紫色渐变 + 装饰圆圈 |
| v2.0 | 2026-02-07 | Glassmorphism 高级设计 | 深色 + 动态网格 |
| v3.0 | 2026-02-07 | 配色升级 | 橙红色渐变 + 装饰圆圈 |
| v4.0 | 2026-02-07 | Clerk.com 风格重构 | 纯色 #F9FAFB |
| v4.1 | 2026-02-07 | 真实注册 + 视觉优化 | 紫色渐变 + 浮动圆圈 |
| v4.2 | 2026-02-07 | 背景简化 | 纯色 #F9FAFB |
| v4.3 | 2026-02-07 | 标题简化 | 纯色 #F9FAFB ⭐ 当前版本 |

---

## 🔗 相关文档

- [Login-真实注册与视觉优化-v4.1.md](../../../docs/Login-真实注册与视觉优化-v4.1.md)
- [Login-背景简化说明-v4.2.md](../../../docs/Login-背景简化说明-v4.2.md)
- [Login-Clerk风格重构说明-v4.0.md](../../../docs/Login-Clerk风格重构说明-v4.0.md)
- [PROJECT_STRUCTURE.md](../../../PROJECT_STRUCTURE.md)

---

**最后更新**: 2026-02-08  
**维护者**: Kiro AI + 开发团队  
**状态**: ✅ 已完成（v4.3）
