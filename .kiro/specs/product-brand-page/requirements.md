# ProductBrand 商品与品牌洞察页面需求规格 - v3.x

## 📋 项目概述

**功能模块**: 商品与品牌洞察数据分析  
**当前版本**: v3.2  
**技术栈**: Vue 3 + ECharts 5 + echarts-wordcloud + Element Plus  
**布局设计**: 2x2 Bento Grid 布局  

---

## 🎯 核心目标

### 业务目标
1. 提供多维度商品数据分析能力
2. 展示品类层级关系和销售占比
3. 展示品牌竞争力排名
4. 分析价格与销量的相关性
5. 识别市场热门品类

### 用户目标
1. 快速了解品类销售结构（旭日图）
2. 识别 TOP 品牌（柱状图）
3. 发现热门品类（词云图）
4. 分析价格敏感度（散点图）

---

## 👥 用户故事

### US-1: 品类层级分析
**作为** 数据分析师  
**我想要** 查看品类的层级销售占比  
**以便** 了解不同品类和子品类的销售结构

**验收标准**:
- [ ] 使用旭日图展示品类层级关系
- [ ] 支持多层级数据（如 `Electronics.Smartphone`）
- [ ] 不同品类使用不同颜色区分
- [ ] 悬停显示品类名称和销售额
- [ ] 支持点击下钻到子品类
- [ ] 图表高度固定为 420px
- [ ] 无不必要的包裹层（单层结构）

### US-2: 品牌竞争力分析
**作为** 市场分析师  
**我想要** 查看品牌销量排行榜  
**以便** 了解市场上的主要竞争者

**验收标准**:
- [ ] 使用横向柱状图展示品牌 TOP10
- [ ] 品牌按销量从高到低排序
- [ ] 使用橙色渐变柱状图
- [ ] 悬停显示品牌名称和销量
- [ ] 图表高度固定为 420px
- [ ] 数据标签清晰可读

### US-3: 品类热度分析
**作为** 运营人员  
**我想要** 查看热门品类的分布  
**以便** 制定品类推广策略

**验收标准**:
- [ ] 使用 ECharts 词云图展示品类热度
- [ ] 字体大小表示品类热度（14px - 40px）
- [ ] 使用暖色系随机配色（6 种颜色）
- [ ] 支持随机旋转角度（-30° - 30°）
- [ ] 悬停时显示高亮效果（橙色阴影）
- [ ] 支持点击品类（未来可跳转详情）
- [ ] 图表高度固定为 300px

### US-4: 价格敏感度分析
**作为** 定价分析师  
**我想要** 查看价格与销量的相关性  
**以便** 制定合理的定价策略

**验收标准**:
- [ ] 使用散点图展示价格与销量的关系
- [ ] X 轴表示价格，Y 轴表示销量
- [ ] 使用橙色半透明散点
- [ ] 悬停显示具体价格和销量
- [ ] 图表高度固定为 420px
- [ ] 支持缩放和平移（可选）

### US-5: 响应式布局
**作为** 用户  
**我想要** 在不同设备上都能良好查看数据  
**以便** 随时随地进行数据分析

**验收标准**:
- [ ] 桌面端（≥ 1024px）：2x2 网格布局
- [ ] 移动端（< 1024px）：单列布局
- [ ] 图表在移动端自动调整大小
- [ ] 所有交互在移动端都可用
- [ ] 页面加载流畅，无卡顿

---

## 🎨 设计需求

### 布局设计

#### 2x2 Bento Grid 布局
```
┌─────────────┬─────────────┐
│   旭日图    │  品牌TOP10  │
│  (Visual)   │(Analytical) │
├─────────────┼─────────────┤
│   词云图    │  价格散点   │
│  (Visual)   │(Analytical) │
└─────────────┴─────────────┘
```

**设计理念**:
- **左侧（Visual）**: 视觉系图表（旭日图 + 词云图）
  - 色彩丰富，吸引注意力
  - 展示品类热度和层级关系
  
- **右侧（Analytical）**: 分析系图表（柱状图 + 散点图）
  - 数据清晰，便于分析
  - 展示品牌排名和价格敏感度

- **1:1 比例**: 四个图表权重相等，视觉平衡

### 视觉规范

#### 配色方案
| 元素 | 颜色 | 说明 |
|------|------|------|
| 背景光晕（右上） | `rgba(232, 160, 61, 0.12)` | 橙色光晕，70px 模糊 |
| 背景光晕（左下） | `rgba(232, 93, 61, 0.09)` | 橙红色光晕，80px 模糊 |
| 卡片背景 | `$gradient-card` | 半透明渐变 |
| 卡片边框 | `$border-color` | 半透明白色 |
| 标题下划线 | `$primary-color` | 橙色渐变 |

#### 图表高度
| 图表 | 高度 | 说明 |
|------|------|------|
| 旭日图 | 420px | 固定高度 |
| 品牌 TOP10 | 420px | 固定高度 |
| 词云图 | 300px | 固定高度（ECharts 词云） |
| 价格散点图 | 420px | 固定高度 |

#### 交互效果
| 元素 | 悬停效果 | 说明 |
|------|---------|------|
| 图表卡片 | `rotate(-0.5deg) scale(1.008)` | 轻微旋转 + 缩放 |
| 卡片阴影 | `$shadow-lg` | 阴影加深 |
| 卡片边框 | `rgba(232, 160, 61, 0.25)` | 橙色边框高亮 |

#### 动画效果
- **过渡时间**: 0.4s
- **缓动函数**: `cubic-bezier(0.34, 1.56, 0.64, 1)`（弹性缓动）
- **卡片入场**: 从下往上浮现（全局动画）

### 响应式设计
| 设备 | 布局 | 说明 |
|------|------|------|
| 桌面端（≥ 1024px） | 2x2 网格 | 四个图表并排显示 |
| 移动端（< 1024px） | 单列布局 | 图表垂直堆叠 |

---

## 🔧 技术需求

### 数据结构

#### productData 响应式状态
```javascript
const productData = ref({
  // 品牌 TOP10 数据
  brandTop10: {
    brands: ['Apple', 'Samsung', 'Huawei', ...],  // 品牌名称数组
    sales: [1000, 800, 600, ...]                   // 对应销量数组
  },
  
  // 品类词云数据
  categoryWordCloud: [
    { name: '手机', value: 1500 },
    { name: '笔记本电脑', value: 1200 },
    { name: '平板电脑', value: 800 },
    // ...
  ],
  
  // 价格敏感度散点数据
  priceSensitivity: [
    [1999, 500],   // [价格, 销量]
    [2999, 300],
    [3999, 200],
    // ...
  ],
  
  // 品类销售旭日图数据
  categorySales: [
    { name: 'Electronics.Smartphone', value: 14500000 },
    { name: 'Electronics.Laptop', value: 12000000 },
    { name: 'Appliances.Refrigerator', value: 8500000 },
    // ...
  ]
})
```

### 组件导入
```javascript
import BarChart from '@/components/BarChart.vue'
import ScatterChart from '@/components/ScatterChart.vue'
import SunburstChart from '@/components/SunburstChart.vue'
import WordCloudChart from '@/components/WordCloudChart.vue'
```

### 数据加载流程
```javascript
const loadData = async () => {
  try {
    // 1. 加载商品数据（品牌、词云、价格敏感度）
    const productResponse = await fetchProductData()
    productData.value.brandTop10 = productResponse.data.brandTop10
    productData.value.categoryWordCloud = productResponse.data.categoryWordCloud
    productData.value.priceSensitivity = productResponse.data.priceSensitivity
    
    // 2. 加载旭日图数据（从 Dashboard API 获取）
    const dashboardResponse = await fetchDashboardData('2019-10-01', '2019-10-31')
    productData.value.categorySales = dashboardResponse.data.categorySales
  } catch (error) {
    console.error('加载商品分析数据失败:', error)
  }
}
```

### 路由配置
- **页面路径**: `/product-brand`
- **页面标题**: "商品与品牌洞察"
- **侧边栏图标**: 商品图标

---

## 📊 性能需求

### 加载性能
- **首屏加载时间**: < 2 秒
- **图表渲染时间**: < 500ms
- **数据加载时间**: < 1 秒（Mock 数据）

### 图表性能
- **旭日图**: 支持 < 100 个品类节点
- **柱状图**: 固定显示 TOP10
- **词云图**: 支持 < 50 个品类
- **散点图**: 支持 < 500 个数据点

### 浏览器兼容性
| 浏览器 | 最低版本 | 支持情况 |
|--------|---------|---------|
| Chrome | 90+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |

---

## 🧪 测试需求

### 功能测试

#### 数据加载
- [ ] 页面加载时自动获取数据
- [ ] 数据加载失败时显示错误提示
- [ ] 数据为空时显示空状态提示

#### 图表渲染
- [ ] 旭日图正确渲染品类层级
- [ ] 柱状图正确显示品牌排名
- [ ] 词云图正确显示品类热度
- [ ] 散点图正确显示价格与销量关系

#### 交互功能
- [ ] 旭日图支持点击下钻
- [ ] 所有图表支持悬停显示详情
- [ ] 卡片悬停时显示交互效果
- [ ] 移动端触摸交互正常

### UI 测试
- [ ] 桌面端 2x2 布局正确
- [ ] 移动端单列布局正确
- [ ] 图表高度符合规范
- [ ] 卡片悬停效果正确
- [ ] 光晕装饰显示正确

### 性能测试
- [ ] 首屏加载时间 < 2 秒
- [ ] 图表渲染流畅，无卡顿
- [ ] 内存占用合理（< 100MB）
- [ ] CPU 占用合理（< 30%）

---

## 📈 未来改进建议

### 功能增强
- [ ] 支持时间范围筛选
- [ ] 支持品类筛选（点击后高亮相关数据）
- [ ] 支持品类对比功能
- [ ] 支持数据导出（CSV、Excel）
- [ ] 支持图表截图功能

### 数据维度扩展
- [ ] 支持多种热度指标（销量、浏览量、收藏量）
- [ ] 添加时间维度（对比不同时间段的品类热度）
- [ ] 支持品类趋势分析（上升/下降）
- [ ] 支持品牌市场份额分析

### 视觉效果优化
- [ ] 添加图表动画（入场动画、数据更新动画）
- [ ] 支持自定义配色方案
- [ ] 添加 3D 旭日图效果（可选）
- [ ] 支持暗黑模式

### 性能优化
- [ ] 虚拟滚动（当品类数量 > 50 时）
- [ ] 懒加载（滚动到可视区域时再渲染）
- [ ] 数据缓存（避免重复请求）
- [ ] 图表按需加载（IntersectionObserver）

### 交互增强
- [ ] 点击品类词云跳转到品类详情页
- [ ] 支持图表联动（点击一个图表，其他图表高亮相关数据）
- [ ] 支持图表缩放和平移
- [ ] 支持全屏查看单个图表

---

## ⚠️ 注意事项

### 数据来源
- **当前**: 使用 Mock 数据（`frontend/src/api/mockData.js`）
- **数据集**: 2019年10月电商数据
- **未来**: 可对接真实后端 API

### 代码规范
- **组件结构**: 单层结构，无不必要的包裹层
- **图表高度**: ECharts 图表统一使用固定高度 420px
- **注释规范**: 使用中文注释，JSDoc 格式
- **命名规范**: 使用语义化的类名和变量名

### 性能优化
- **图表懒加载**: 使用 `onMounted` 钩子加载数据
- **响应式布局**: 移动端自动切换为单列布局
- **动画性能**: 使用 CSS 动画（GPU 加速）

---

## 📝 版本历史

| 版本 | 日期 | 主要变更 | 布局结构 |
|------|------|---------|---------|
| v1.0 | 2026-02-06 | 初始版本 | 3 个图表 |
| v2.0 | 2026-02-07 | 配色优化 | 3 个图表 |
| v2.1 | 2026-02-07 | Bento Grid 布局 | 3 个图表 |
| v2.2 | 2026-02-07 | 反主流设计升级 | 3 个图表 |
| v2.3 | 2026-02-08 | 光晕装饰优化 | 3 个图表 |
| v2.4 | 2026-02-08 | 旭日图布局优化 | 3 个图表 |
| v2.5 | 2026-02-08 | 新增词云图 | 4 个图表（简单列表） |
| v3.0 | 2026-02-08 | 2x2 布局升级 | 4 个图表（2x2 网格） |
| v3.1 | 2026-02-08 | 旭日图布局简化 | 4 个图表（单层结构） |
| v3.2 | 2026-02-08 | 词云图 ECharts 升级 | 4 个图表（ECharts 词云）⭐ 当前版本 |

---

## 🔗 相关文档

- [ProductBrand-功能说明.md](../../../docs/ProductBrand-功能说明.md)
- [ProductBrand-2x2布局升级说明-v3.0.md](../../../docs/ProductBrand-2x2布局升级说明-v3.0.md)
- [ProductBrand-旭日图布局简化说明-v3.1.md](../../../docs/ProductBrand-旭日图布局简化说明-v3.1.md)
- [ProductBrand-词云图新增说明-v2.5.md](../../../docs/ProductBrand-词云图新增说明-v2.5.md)
- [PROJECT_STRUCTURE.md](../../../PROJECT_STRUCTURE.md)

---

**最后更新**: 2026-02-08  
**维护者**: Kiro AI + 开发团队  
**状态**: ✅ 已完成（v3.2）
